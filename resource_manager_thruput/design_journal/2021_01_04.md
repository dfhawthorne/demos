# 2021-01-04: Custom Performance Load Script

## Overview

Instead of using a generated load test script, I am now generating the load
using a custom script created from a Jinja2 template.

# Table of Contents

* [Generate Custom Script](#generate-custom-script)
* [TNS Alias](#tns-alias)
* [Performance Test Driver Script](#performance-test-driver-script)

# Generate Custom Script

I ran the following HammerDB commands to generate the performance load script:
```tcl
diset tpcc ora_driver timed
loadscript
print script
```

An edited version of the generated script was converted to the Jinja2
template, "[custom_load.tcl.j2](../tmeplates/custom_load.tcl.j2)".

The name of this script is stored in the variable, `custom_load_test_script`,
which is defined in "[client.yml](../inventory/group_vars/client.yml)".

This script is generated in the playbook,
"[run_hammerdb_test.yml](../run_hammerdb_test.yml)".

# TNS Alias

Moved the `tns_alias` variable out of
"[install_hammerdb.yml](../install_hammerdb.yml)" into
"[all.yml](../inventory/group_vars/all.yml)".

This variable was added to the following files:
* "[create_tpcc_schema_parms.tcl.j2](../templates/create_tpcc_schema_parms.tcl.j2)"
* "[logon_oracle.tcl.inc](../templates/logon_oracle.tcl.inc)"
* "[run_hammerdb_test.tcl.j2](templates/run_hammerdb_test.tcl.j2)"

# Performance Test Driver Script

The performance test driver script,
"[run_hammerdb_test.tcl.j2](../templates/run_hammerdb_test.tcl.j2)", was
updated to:
* Remove the generation of the AWR snapshots (this is now done in the
custom load performance script
* Virtual user configuration is removed
